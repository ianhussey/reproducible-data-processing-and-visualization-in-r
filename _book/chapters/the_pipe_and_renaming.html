<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; The pipe and renaming – Reproducible Data Processing and Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/data_transformation_1.html" rel="next">
<link href="../chapters/loading_data.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-485d01fc63b59abcd3ee1bf1e8e2748d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/the_pipe_and_renaming.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The pipe and renaming</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Reproducible Data Processing and Visualization</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installation and setup</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Fundamentals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/reproducible_reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reproducible reports</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/loading_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Loading, viewing and saving data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/the_pipe_and_renaming.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The pipe and renaming</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/data_transformation_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data transformation I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/data_transformation_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data transformation II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/strings_and_factors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Strings and factors</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/structuring_projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Structuring projects</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/reshaping_and_pivots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Reshaping and pivots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/binding_and_joining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Binding and joining</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/reporting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Reporting</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/privacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Data privacy and anonymity</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">License and citation</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#exploring-column-names-and-rows" id="toc-exploring-column-names-and-rows" class="nav-link active" data-scroll-target="#exploring-column-names-and-rows"><span class="header-section-number">5.1</span> Exploring column names and rows</a>
  <ul class="collapse">
  <li><a href="#count-rows-and-columns-with-nrow-and-ncol" id="toc-count-rows-and-columns-with-nrow-and-ncol" class="nav-link" data-scroll-target="#count-rows-and-columns-with-nrow-and-ncol"><span class="header-section-number">5.1.1</span> Count rows and columns with <code>nrow()</code> and <code>ncol()</code></a></li>
  <li><a href="#viewing-column-names-with-colnames" id="toc-viewing-column-names-with-colnames" class="nav-link" data-scroll-target="#viewing-column-names-with-colnames"><span class="header-section-number">5.1.2</span> Viewing column names with <code>colnames()</code></a></li>
  </ul></li>
  <li><a href="#the-pipe" id="toc-the-pipe" class="nav-link" data-scroll-target="#the-pipe"><span class="header-section-number">5.2</span> The pipe</a>
  <ul class="collapse">
  <li><a href="#what-is-the-pipe" id="toc-what-is-the-pipe" class="nav-link" data-scroll-target="#what-is-the-pipe"><span class="header-section-number">5.2.1</span> What is the pipe?</a></li>
  <li><a href="#why-use-the-pipe" id="toc-why-use-the-pipe" class="nav-link" data-scroll-target="#why-use-the-pipe"><span class="header-section-number">5.2.2</span> Why use the pipe?</a></li>
  <li><a href="#how-to-insert-a-pipe" id="toc-how-to-insert-a-pipe" class="nav-link" data-scroll-target="#how-to-insert-a-pipe"><span class="header-section-number">5.2.3</span> How to insert a pipe?</a></li>
  </ul></li>
  <li><a href="#implicit-arguments-the-pipe" id="toc-implicit-arguments-the-pipe" class="nav-link" data-scroll-target="#implicit-arguments-the-pipe"><span class="header-section-number">5.3</span> Implicit arguments &amp; the pipe</a>
  <ul class="collapse">
  <li><a href="#the-two-pipes-vs." id="toc-the-two-pipes-vs." class="nav-link" data-scroll-target="#the-two-pipes-vs."><span class="header-section-number">5.3.1</span> The two pipes: <code>%&gt;%</code> vs.&nbsp;<code>|&gt;</code></a></li>
  </ul></li>
  <li><a href="#renaming-columns" id="toc-renaming-columns" class="nav-link" data-scroll-target="#renaming-columns"><span class="header-section-number">5.4</span> Renaming columns</a>
  <ul class="collapse">
  <li><a href="#why-rename" id="toc-why-rename" class="nav-link" data-scroll-target="#why-rename"><span class="header-section-number">5.4.1</span> Why rename</a></li>
  <li><a href="#renaming-with-rename-the-pipe" id="toc-renaming-with-rename-the-pipe" class="nav-link" data-scroll-target="#renaming-with-rename-the-pipe"><span class="header-section-number">5.4.2</span> Renaming with <code>rename()</code> &amp; the pipe</a></li>
  </ul></li>
  <li><a href="#automatic-renaming-with-janitorclean_names" id="toc-automatic-renaming-with-janitorclean_names" class="nav-link" data-scroll-target="#automatic-renaming-with-janitorclean_names"><span class="header-section-number">5.5</span> Automatic renaming with <code>janitor::clean_names()</code></a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">5.6</span> Exercises</a>
  <ul class="collapse">
  <li><a href="#what-four-principles-should-column-names-follow" id="toc-what-four-principles-should-column-names-follow" class="nav-link" data-scroll-target="#what-four-principles-should-column-names-follow"><span class="header-section-number">5.6.1</span> What four principles should column names follow?</a></li>
  <li><a href="#interactive-exercises" id="toc-interactive-exercises" class="nav-link" data-scroll-target="#interactive-exercises"><span class="header-section-number">5.6.2</span> Interactive exercises</a></li>
  <li><a href="#read-.csv-file-and-rename-columns" id="toc-read-.csv-file-and-rename-columns" class="nav-link" data-scroll-target="#read-.csv-file-and-rename-columns"><span class="header-section-number">5.6.3</span> Read .csv file and rename columns</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The pipe and renaming</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="exploring-column-names-and-rows" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="exploring-column-names-and-rows"><span class="header-section-number">5.1</span> Exploring column names and rows</h2>
<p>As in the last chapter, we load data using relative paths and <code>read_csv()</code> and view the first few rows with <code>head()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr) <span class="co"># for read_csv()</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># for %&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr) <span class="co"># for kable()</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra) <span class="co"># for kable_extra()</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_demographics_raw_messy.csv"</span>) </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_demographics_raw) <span class="sc">%&gt;%</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">subject and session info columns</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">...2</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">task structure columns</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">...4</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">response columns</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">...6</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">...7</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">...8</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">date</td>
<td style="text-align: left;">Subject Code</td>
<td style="text-align: left;">build</td>
<td style="text-align: left;">block code and trial number</td>
<td style="text-align: left;">Trial Code</td>
<td style="text-align: left;">Key response (use this!)</td>
<td style="text-align: left;">correct</td>
<td style="text-align: left;">0 ms onset RT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: left;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: left;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: left;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: left;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">619</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Unfortunately, the ‘data_demographics_raw_messy.csv’ data set is, as its name suggests, somewhat messy. The column names are on the third row, not the first one.</p>
<p>How should you alter the above code to ignore the first two lines when reading the data in to R?</p>
<div class="callout callout-style-default callout-note callout-titled" title="Click to show answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to show answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_demographics_raw_messy.csv"</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">skip =</span> <span class="dv">2</span>) <span class="co"># add skip = 2 to ignore the first two lines</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_demographics_raw) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Subject Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block code and trial number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Trial Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Key response (use this!)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">0 ms onset RT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<section id="count-rows-and-columns-with-nrow-and-ncol" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="count-rows-and-columns-with-nrow-and-ncol"><span class="header-section-number">5.1.1</span> Count rows and columns with <code>nrow()</code> and <code>ncol()</code></h3>
<p>Processing and cleaning any data set requires an understanding what it contains - as well as a thorough understanding of how the data was generated (e.g., the study’s design and specific implementation; what rows represent what measurement and in what way, etc.).</p>
<p>A rudimentary but important step to understanding what a data set contains is to know how many rows and columns it contains.</p>
<p>This is useful to check at multiple steps of your data processing to make sure you have not done something wrong by gaining or losing columns or rows that you should not.</p>
<p>Number of rows:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dat_demographics_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<p>Number of columns:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(dat_demographics_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</section>
<section id="viewing-column-names-with-colnames" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="viewing-column-names-with-colnames"><span class="header-section-number">5.1.2</span> Viewing column names with <code>colnames()</code></h3>
<p>How would you know what variables are in a data frame? You can view the data frame, but it can also be useful to print them. Knowing what you have is one of the first steps to working with it.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_demographics_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "date"                        "Subject Code"               
[3] "build"                       "block code and trial number"
[5] "Trial Code"                  "Key response (use this!)"   
[7] "correct"                     "0 ms onset RT"              </code></pre>
</div>
</div>
<p>Later, when you’re used to using functions such as <code>rename()</code> and <code>mutate()</code>, you will often want a vector of column names that you can easily copy-paste into code, without all the extra white-space and including commas between them. For this, you can use <code>dput()</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dput</span>(<span class="fu">colnames</span>(dat_demographics_raw))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>c("date", "Subject Code", "build", "block code and trial number", 
"Trial Code", "Key response (use this!)", "correct", "0 ms onset RT"
)</code></pre>
</div>
</div>
<p>This takes the output of <code>colnames()</code> and applies <code>dput()</code> to it. When your data processing calls muliple functions in a row, this could get complicated to read and write. It’s therefore time to introduce ‘the pipe’.</p>
</section>
</section>
<section id="the-pipe" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="the-pipe"><span class="header-section-number">5.2</span> The pipe</h2>
<section id="what-is-the-pipe" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="what-is-the-pipe"><span class="header-section-number">5.2.1</span> What is the pipe?</h3>
<p>The output of the function to the left of the pipe is used as the input to the function to the right of the pipe.</p>
<pre class="text"><code>[this function's output...] %&gt;%
  [...becomes this function's input]</code></pre>
<p>For example, the following code does the same thing with and without the pipe:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print all column names as a vector - without the pipe</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dput</span>(<span class="fu">colnames</span>(dat_demographics_raw))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>c("date", "Subject Code", "build", "block code and trial number", 
"Trial Code", "Key response (use this!)", "correct", "0 ms onset RT"
)</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print all column names as a vector - using the pipe</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dput</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>c("date", "Subject Code", "build", "block code and trial number", 
"Trial Code", "Key response (use this!)", "correct", "0 ms onset RT"
)</code></pre>
</div>
</div>
</section>
<section id="why-use-the-pipe" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="why-use-the-pipe"><span class="header-section-number">5.2.2</span> Why use the pipe?</h3>
<p>The pipe allows us to write code that reads from top to bottom, following a series of steps, in the same way that humans would describe and conduct the steps. Without the pipe, code is written from the inside out in the way that R understands it but humans do not as easily.</p>
<p>The utility of the pipe becomes more obvious when there are many steps in the workflow.</p>
<p>The following example uses functions we have not learned yet. We’ll cover them in later chapters. For the moment, the point is to demonstrate the usage of the pipe.</p>
<p>Without the pipe:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># for the pipe, rename, mutate, select, group_by, summarize</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># for round_half_up</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rename</span>(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>            readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_amp_raw.csv"</span>),</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">unique_id =</span> subject,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">block =</span> blockcode,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">trial_type =</span> trialcode,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">rt =</span> latency</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">fast_trial =</span> <span class="fu">ifelse</span>(rt <span class="sc">&lt;</span> <span class="dv">100</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>        unique_id</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">percent_fast_trials =</span> <span class="fu">mean</span>(fast_trial) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_fast_trials =</span> <span class="fu">round_half_up</span>(percent_fast_trials, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co"># print the first few rows</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">unique_id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">percent_fast_trials</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4345805</td>
<td style="text-align: right;">3.66</td>
</tr>
<tr class="even">
<td style="text-align: right;">13708908</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14943693</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">32034696</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">47022865</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">59367911</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">72442795</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">75092407</td>
<td style="text-align: right;">2.44</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83185292</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">85445170</td>
<td style="text-align: right;">15.85</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Notice how the above code has to be written and read from the middle outwards: data is loaded, and what is loaded is used to <code>rename()</code> columns, and what the output is used to <code>mutate()</code> (create) a new column, whose output is used to <code>summarize()</code> across rows for each participant.</p>
<p>This becomes much more linear and human-readable when we use the pipe:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read data from csv</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_amp_raw.csv"</span>) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename columns</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">unique_id =</span> subject,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">block =</span> blockcode,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">trial_type =</span> trialcode,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">rt =</span> latency) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a new variable from existing ones</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fast_trial =</span> <span class="fu">ifelse</span>(rt <span class="sc">&lt;</span> <span class="dv">100</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># summarize across rows, clustered by participant</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unique_id) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">percent_fast_trials =</span> <span class="fu">mean</span>(fast_trial)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># round the percents to two decimal places</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_fast_trials =</span> <span class="fu">round_half_up</span>(percent_fast_trials, <span class="at">digits =</span> <span class="dv">2</span>))</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># print the first few rows</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">|&gt;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">unique_id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">percent_fast_trials</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4345805</td>
<td style="text-align: right;">3.66</td>
</tr>
<tr class="even">
<td style="text-align: right;">13708908</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">14943693</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">32034696</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">47022865</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">59367911</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">72442795</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">75092407</td>
<td style="text-align: right;">2.44</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83185292</td>
<td style="text-align: right;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">85445170</td>
<td style="text-align: right;">15.85</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-to-insert-a-pipe" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="how-to-insert-a-pipe"><span class="header-section-number">5.2.3</span> How to insert a pipe?</h3>
<p>You can insert a pipe by typing <code>%&gt;%</code> or using the following keyboard shortcuts.</p>
<ul>
<li>Windows: shift + Ctrl + M</li>
<li>Mac: shift + Cmd + M</li>
</ul>
<p>For other keyboard shortcuts in RStudio, see the chapter on <a href="../chapters/fundamentals.html">Fundamentals</a>.</p>
</section>
</section>
<section id="implicit-arguments-the-pipe" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="implicit-arguments-the-pipe"><span class="header-section-number">5.3</span> Implicit arguments &amp; the pipe</h2>
<p>As in other cases in R, arguments can be passed to functions ‘explicitly’ (by naming the argument) or ‘implicitly’ (without names).</p>
<p>How the pipe works can be slightly clearer if we use explicit arguments.</p>
<p>The pipe passes the output of the preceding function on to the next function as ‘.’:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span> <span class="co"># output passed forward as '.'</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">x =</span> .) <span class="sc">%&gt;%</span> <span class="co"># output passed forward as '.'</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">x =</span> .) <span class="sc">%&gt;%</span> <span class="co"># -&gt; output passed forward as '.'</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">kable_input =</span> .,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Subject Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block code and trial number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Trial Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Key response (use this!)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">0 ms onset RT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>If not passed explicitly, the input is passed to the next function’s <em>first</em> argument OR, if the funtion takes the ‘.data’ argument (i.e., most {tidyverse} functions) it is passed to ‘.data’:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span> <span class="co"># output passed forward to first argument</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="co"># output passed forward to first argument</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="co"># -&gt; output passed forward to first argument</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Subject Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block code and trial number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Trial Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Key response (use this!)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">0 ms onset RT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="the-two-pipes-vs." class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="the-two-pipes-vs."><span class="header-section-number">5.3.1</span> The two pipes: <code>%&gt;%</code> vs.&nbsp;<code>|&gt;</code></h3>
<p><code>%&gt;%</code> is the original pipe created for the {magrittr} package and used throughout the tidyverse packages. It is slightly slower but also more flexible because it can pass to the ‘.data’ argument.</p>
<p><code>|&gt;</code> is a version of the pipe added more recently to base-R. It is slightly faster but less flexible. This speed only matters if you’re doing this with much larger data sets or very frequently (e.g., in Monte Carlo simulations).</p>
<p>The base R pipe (<code>|&gt;</code>) is less intelligent behind the scenes. It always supplies the input as the first argument and can’t handle passing to ‘.data’. If you want to pass its output explicitly, you use ‘_’ instead of ‘.’. However, in my experience, this works imperfectly and not all functions will accept it. Example of explicit passing with the base R pipe <code>|&gt;</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">|&gt;</span> <span class="co"># output passed forward as '_'</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">x =</span> _) <span class="sc">|&gt;</span> <span class="co"># output passed forward as '_'</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">x =</span> _) <span class="sc">|&gt;</span> <span class="co"># output passed forward as '_'</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">kable_input =</span> _,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Subject Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block code and trial number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Trial Code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Key response (use this!)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">0 ms onset RT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>If you’re not sure, it’s usually easier to use <code>%&gt;%</code>.</p>
<p>I try to use <code>%&gt;%</code> throughout this book, but because I use <code>|&gt;</code> more often in my own code I might slip up.</p>
</section>
</section>
<section id="renaming-columns" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="renaming-columns"><span class="header-section-number">5.4</span> Renaming columns</h2>
<section id="why-rename" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="why-rename"><span class="header-section-number">5.4.1</span> Why rename</h3>
<p>Column names are easiest to work with when they follow four principles: when they’re clear and descriptive, follow a standard convention, are unique, and don’t break R syntax.</p>
<section id="use-clear-and-descriptive-names" class="level4" data-number="5.4.1.1">
<h4 data-number="5.4.1.1" class="anchored" data-anchor-id="use-clear-and-descriptive-names"><span class="header-section-number">5.4.1.1</span> Use clear and descriptive names</h4>
<p>Variable names should help explain what the variable contains. <code>X3</code> tells the user a lot less about the variable than <code>extroversion_sum_score</code>.</p>
<p>This sounds obvious, but it’s harder than it sounds and it often isn’t done.</p>
<p><img src="../images/meaningful_variable_name_meme.png" class="center img-fluid" style="width:60.0%"></p>
</section>
<section id="use-a-naming-convention" class="level4" data-number="5.4.1.2">
<h4 data-number="5.4.1.2" class="anchored" data-anchor-id="use-a-naming-convention"><span class="header-section-number">5.4.1.2</span> Use a naming convention</h4>
<p>Various naming conventions exist and are used for both objects (e.g., data frames) and functions.</p>
<ul>
<li>snake_case: standard in {tidyverse} code, e.g., <code>write_csv()</code></li>
<li>lower.dot.case: often used in older functions in base-R, e.g., <code>write.csv()</code></li>
<li>camelCase: often used in Python</li>
</ul>
<p>On the one hand, as long as you’re consitent, it doesn’t matter which one you use.</p>
<p>On the other hand, snake_case is objectively the best answer and you should use it.</p>
</section>
<section id="use-unique-names" class="level4" data-number="5.4.1.3">
<h4 data-number="5.4.1.3" class="anchored" data-anchor-id="use-unique-names"><span class="header-section-number">5.4.1.3</span> Use unique names</h4>
<p>If more than one column has the same name, you’ll have issues trying to work with those columns.</p>
</section>
<section id="avoid-characters-that-break-r-syntax" class="level4" data-number="5.4.1.4">
<h4 data-number="5.4.1.4" class="anchored" data-anchor-id="avoid-characters-that-break-r-syntax"><span class="header-section-number">5.4.1.4</span> Avoid characters that break R syntax</h4>
<p>The following cause problems:</p>
<ul>
<li>Column names that begin with a number, e.g., <code>1_to_7_depression</code>.</li>
<li>Column names that contain spaces, e.g., `depression 1 to 7’.</li>
<li>Column names that contain characters other than letters and numbers, e.g., <code>depression_1_to_7*</code>.</li>
<li>Column names that are ‘reserved names’ in R, e.g., <code>TRUE</code>.</li>
</ul>
<p>For example, the ‘dat_demographics_raw’ data frame contains a columns named <code>correct</code> and <code>0 ms onset RT</code>.</p>
<p>If we want to print the rows of <code>correct</code> using base-R we can do this with <code>$</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw<span class="sc">$</span>correct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<p>This can also be done using the {dplyr} function <code>pull()</code> and the pipe:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(correct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<p>This can’t be done as easily for the column <code>0 ms onset RT</code> because the number and spaces break the code and will throw an error:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base-R</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw<span class="sc">$</span><span class="dv">0</span> ms onset RT</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(<span class="dv">0</span> ms onset RT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<blockquote class="blockquote">
<p>Error: unexpected numeric constant in “dat_demographics_raw$0” Error during wrapup: not that many frames on the stack Error: no more error handlers available (recursive errors?); invoking ‘abort’ restart</p>
</blockquote>
<p>You can make it work by enclosing the column name in backticks (`) or quotes (“):</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base-R</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw<span class="sc">$</span><span class="st">"0 ms onset RT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1372  619 1372  619 3946 3724 3946 3724 2576 3050 2576 3050 4311 2793 6887
[16] 6887</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(<span class="st">"0 ms onset RT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1372  619 1372  619 3946 3724 3946 3724 2576 3050 2576 3050 4311 2793 6887
[16] 6887</code></pre>
</div>
</div>
<p>However this becomes cumbersome and annoying. It’s much easier to rename the variable.</p>
</section>
</section>
<section id="renaming-with-rename-the-pipe" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="renaming-with-rename-the-pipe"><span class="header-section-number">5.4.2</span> Renaming with <code>rename()</code> &amp; the pipe</h3>
<p>Use <code>dplyr::rename()</code> to change the name of one or more columns. It works like this:</p>
<pre><code>`df %&gt;% rename(new_name = old_name)`</code></pre>
<p>Let’s create a data frame called <code>dat_demographics_renamed</code> from <code>dat_demographics_raw</code>, which renames the <code>0 ms onset RT</code> column to timely <code>rt</code>:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view old column names </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_demographics_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "date"                        "Subject Code"               
[3] "build"                       "block code and trial number"
[5] "Trial Code"                  "Key response (use this!)"   
[7] "correct"                     "0 ms onset RT"              </code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">rt =</span> <span class="st">"0 ms onset RT"</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># view new column names </span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_demographics_renamed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "date"                        "Subject Code"               
[3] "build"                       "block code and trial number"
[5] "Trial Code"                  "Key response (use this!)"   
[7] "correct"                     "rt"                         </code></pre>
</div>
</div>
<p>If you want to rename multiple columns at once, you can do this in a single call of the <code>rename()</code> function:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> <span class="st">"Subject Code"</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_trial =</span> <span class="st">"block code and trial number"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">question =</span> <span class="st">"Trial Code"</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">response =</span> <span class="st">"Key response (use this!)"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">rt =</span> <span class="st">"0 ms onset RT"</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># view new column names and the first few rows</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_demographics_renamed) <span class="sc">%&gt;%</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block_trial</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">question</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">response</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="automatic-renaming-with-janitorclean_names" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="automatic-renaming-with-janitorclean_names"><span class="header-section-number">5.5</span> Automatic renaming with <code>janitor::clean_names()</code></h2>
<p>Cleaning names is such a common task that there are functions that rename all columns in a dataset at once, such as <code>janitor::clean_names()</code>.</p>
<p>However, <code>clean_names()</code> can only rename to a standard naming convention and remove problematic characters, it can’t choose meaningful variable names.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># for clean_names()</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">subject_code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block_code_and_trial_number</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trial_code</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">key_response_use_this</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">x0_ms_onset_rt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>It’s still very useful as part of a tidy workflow:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># code you might write to help you write the final varsion below</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>dat_demographics_temp <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>dat_demographics_temp <span class="sc">%&gt;%</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dput</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>c("date", "subject_code", "build", "block_code_and_trial_number", 
"trial_code", "key_response_use_this", "correct", "x0_ms_onset_rt"
)</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># final working version</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> subject_code, </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_trial =</span> block_code_and_trial_number, </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">question =</span> trial_code, </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">response =</span> key_response_use_this, </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">rt =</span> x0_ms_onset_rt)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="sc">%&gt;%</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">build</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">block_trial</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">question</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">response</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">correct</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">psychiatric diagnosis</td>
<td style="text-align: left;">schizophrenia</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">548957868</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">prolific ID</td>
<td style="text-align: left;">asldkjaao87809</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3946</td>
</tr>
<tr class="even">
<td style="text-align: left;">23.06.2022</td>
<td style="text-align: right;">504546409</td>
<td style="text-align: left;">06.06.2000</td>
<td style="text-align: left;">demographics_3</td>
<td style="text-align: left;">gender</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3724</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="exercises" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="exercises"><span class="header-section-number">5.6</span> Exercises</h2>
<section id="what-four-principles-should-column-names-follow" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="what-four-principles-should-column-names-follow"><span class="header-section-number">5.6.1</span> What four principles should column names follow?</h3>
<div class="callout callout-style-default callout-note callout-titled" title="Click to show answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to show answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li>Use clear and descriptive names</li>
<li>Use a naming convention such as snake_case</li>
<li>Use unique names</li>
<li>Avoid characters that break R syntax, such as spaces, non-alphanumeric characters, or starting column names with a number.</li>
</ol>
</div>
</div>
</div>
</section>
<section id="interactive-exercises" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="interactive-exercises"><span class="header-section-number">5.6.2</span> Interactive exercises</h3>
<p>Complete the interactive <code>rename()</code> exercises <a href="https://errors.shinyapps.io/dplyr-learnr/#section-dplyrrename">here</a>. This web app is written in the {shiny} package and allows you to write and run code in your web browser.</p>
</section>
<section id="read-.csv-file-and-rename-columns" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="read-.csv-file-and-rename-columns"><span class="header-section-number">5.6.3</span> Read .csv file and rename columns</h3>
<p>Download the data and code for this e-Book (see the <a href="../index.html">Introduction</a>).</p>
<p>In your local version of this .qmd file:</p>
<ul>
<li>Create a data frame called <code>dat_likert_messy</code> by reading the .csv file from ‘../data/raw/data_likert_messy.csv’.</li>
<li>Print its column names.</li>
<li>Create a new data frame called <code>dat_likert_renamed</code> by taking <code>dat_likert_messy</code> and using <code>rename()</code> and the pipe to rename every column so that it conforms to the four principles above.</li>
<li>Use <code>head()</code> to print the first few rows of <code>dat_likert_renamed</code> so that you can verify that the renaming was successful.</li>
<li>Write suitable comments explaining the code.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled" title="Click to show answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to show answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read data </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>dat_likert_messy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/raw/data_likert_messy.csv"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print column names</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_likert_messy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date d m y"                 "Group"                     
[3] "subject code"               "1 to 7 likert scale item 1"
[5] "1 to 7 likert scale item 2"</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new df with renamed columns</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>dat_likert_renamed <span class="ot">&lt;-</span> dat_likert_messy <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date =</span> <span class="st">"Date d m y"</span>,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">group  =</span> <span class="st">"Group"</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">subject_code  =</span> <span class="st">"subject code"</span>,</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">likert_scale1_item1 =</span> <span class="st">"1 to 7 likert scale item 1"</span>,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">likert_scale1_item2 =</span> <span class="st">"1 to 7 likert scale item 2"</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># check renaming was successful </span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_likert_renamed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  date       group subject_code likert_scale1_item1 likert_scale1_item2
  &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;               &lt;dbl&gt;               &lt;dbl&gt;
1 23.06.2022     1            1                   1                   4
2 23.06.2022     2            2                   3                   3
3 23.06.2022     2            3                   2                   1
4 23.06.2022     1            4                   5                   5
5 23.06.2022     1            5                   3                   3
6 23.06.2022     2            6                   2                   1</code></pre>
</div>
</div>
</div>
</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/loading_data.html" class="pagination-link" aria-label="Loading, viewing and saving data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Loading, viewing and saving data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/data_transformation_1.html" class="pagination-link" aria-label="Data transformation I">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data transformation I</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb44" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "The pipe and renaming"</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">    toc_float: true</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co"># settings, placed in a chunk that will not show in the .html file (because include=FALSE) </span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="co"># disables scientific notation so that small numbers appear as eg "0.00001" rather than "1e-05"</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)  </span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exploring column names and rows</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>As in the last chapter, we load data using relative paths and <span class="in">`read_csv()`</span> and view the first few rows with <span class="in">`head()`</span>.</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr) <span class="co"># for read_csv()</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># for %&gt;%</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr) <span class="co"># for kable()</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra) <span class="co"># for kable_extra()</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_demographics_raw_messy.csv"</span>) </span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_demographics_raw) <span class="sc">%&gt;%</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>Unfortunately, the 'data_demographics_raw_messy.csv' data set is, as its name suggests, somewhat messy. The column names are on the third row, not the first one.</span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>How should you alter the above code to ignore the first two lines when reading the data in to R?</span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to show answer"}</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_demographics_raw_messy.csv"</span>, </span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">skip =</span> <span class="dv">2</span>) <span class="co"># add skip = 2 to ignore the first two lines</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_demographics_raw) <span class="sc">%&gt;%</span></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a><span class="fu">### Count rows and columns with `nrow()` and `ncol()`</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>Processing and cleaning any data set requires an understanding what it contains - as well as a thorough understanding of how the data was generated (e.g., the study's design and specific implementation; what rows represent what measurement and in what way, etc.).</span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>A rudimentary but important step to understanding what a data set contains is to know how many rows and columns it contains.</span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>This is useful to check at multiple steps of your data processing to make sure you have not done something wrong by gaining or losing columns or rows that you should not.</span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a>Number of rows:</span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dat_demographics_raw)</span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a>Number of columns:</span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(dat_demographics_raw)</span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a><span class="fu">### Viewing column names with `colnames()`</span></span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-85"><a href="#cb44-85" aria-hidden="true" tabindex="-1"></a>How would you know what variables are in a data frame? You can view the data frame, but it can also be useful to print them. Knowing what you have is one of the first steps to working with it.</span>
<span id="cb44-86"><a href="#cb44-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-89"><a href="#cb44-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-90"><a href="#cb44-90" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_demographics_raw)</span>
<span id="cb44-91"><a href="#cb44-91" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-92"><a href="#cb44-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-93"><a href="#cb44-93" aria-hidden="true" tabindex="-1"></a>Later, when you're used to using functions such as <span class="in">`rename()`</span> and <span class="in">`mutate()`</span>, you will often want a vector of column names that you can easily copy-paste into code, without all the extra white-space and including commas between them. For this, you can use <span class="in">`dput()`</span>:</span>
<span id="cb44-94"><a href="#cb44-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-97"><a href="#cb44-97" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-98"><a href="#cb44-98" aria-hidden="true" tabindex="-1"></a><span class="fu">dput</span>(<span class="fu">colnames</span>(dat_demographics_raw))</span>
<span id="cb44-99"><a href="#cb44-99" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-100"><a href="#cb44-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-101"><a href="#cb44-101" aria-hidden="true" tabindex="-1"></a>This takes the output of <span class="in">`colnames()`</span> and applies <span class="in">`dput()`</span> to it. When your data processing calls muliple functions in a row, this could get complicated to read and write. It's therefore time to introduce 'the pipe'.</span>
<span id="cb44-102"><a href="#cb44-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-103"><a href="#cb44-103" aria-hidden="true" tabindex="-1"></a><span class="fu">## The pipe</span></span>
<span id="cb44-104"><a href="#cb44-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-105"><a href="#cb44-105" aria-hidden="true" tabindex="-1"></a><span class="fu">### What is the pipe?</span></span>
<span id="cb44-106"><a href="#cb44-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-107"><a href="#cb44-107" aria-hidden="true" tabindex="-1"></a>The output of the function to the left of the pipe is used as the input to the function to the right of the pipe.</span>
<span id="cb44-108"><a href="#cb44-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-109"><a href="#cb44-109" aria-hidden="true" tabindex="-1"></a><span class="in">``` text</span></span>
<span id="cb44-110"><a href="#cb44-110" aria-hidden="true" tabindex="-1"></a><span class="in">[this function's output...] %&gt;%</span></span>
<span id="cb44-111"><a href="#cb44-111" aria-hidden="true" tabindex="-1"></a><span class="in">  [...becomes this function's input]</span></span>
<span id="cb44-112"><a href="#cb44-112" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-113"><a href="#cb44-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-114"><a href="#cb44-114" aria-hidden="true" tabindex="-1"></a>For example, the following code does the same thing with and without the pipe:</span>
<span id="cb44-115"><a href="#cb44-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-118"><a href="#cb44-118" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-119"><a href="#cb44-119" aria-hidden="true" tabindex="-1"></a><span class="co"># print all column names as a vector - without the pipe</span></span>
<span id="cb44-120"><a href="#cb44-120" aria-hidden="true" tabindex="-1"></a><span class="fu">dput</span>(<span class="fu">colnames</span>(dat_demographics_raw))</span>
<span id="cb44-121"><a href="#cb44-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-122"><a href="#cb44-122" aria-hidden="true" tabindex="-1"></a><span class="co"># print all column names as a vector - using the pipe</span></span>
<span id="cb44-123"><a href="#cb44-123" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-124"><a href="#cb44-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb44-125"><a href="#cb44-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dput</span>() </span>
<span id="cb44-126"><a href="#cb44-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-127"><a href="#cb44-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-128"><a href="#cb44-128" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why use the pipe?</span></span>
<span id="cb44-129"><a href="#cb44-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-130"><a href="#cb44-130" aria-hidden="true" tabindex="-1"></a>The pipe allows us to write code that reads from top to bottom, following a series of steps, in the same way that humans would describe and conduct the steps. Without the pipe, code is written from the inside out in the way that R understands it but humans do not as easily.</span>
<span id="cb44-131"><a href="#cb44-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-132"><a href="#cb44-132" aria-hidden="true" tabindex="-1"></a>The utility of the pipe becomes more obvious when there are many steps in the workflow.</span>
<span id="cb44-133"><a href="#cb44-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-134"><a href="#cb44-134" aria-hidden="true" tabindex="-1"></a>The following example uses functions we have not learned yet. We'll cover them in later chapters. For the moment, the point is to demonstrate the usage of the pipe.</span>
<span id="cb44-135"><a href="#cb44-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-136"><a href="#cb44-136" aria-hidden="true" tabindex="-1"></a>Without the pipe:</span>
<span id="cb44-137"><a href="#cb44-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-140"><a href="#cb44-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-141"><a href="#cb44-141" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># for the pipe, rename, mutate, select, group_by, summarize</span></span>
<span id="cb44-142"><a href="#cb44-142" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># for round_half_up</span></span>
<span id="cb44-143"><a href="#cb44-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-144"><a href="#cb44-144" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> </span>
<span id="cb44-145"><a href="#cb44-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-146"><a href="#cb44-146" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb44-147"><a href="#cb44-147" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(</span>
<span id="cb44-148"><a href="#cb44-148" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb44-149"><a href="#cb44-149" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rename</span>(</span>
<span id="cb44-150"><a href="#cb44-150" aria-hidden="true" tabindex="-1"></a>            readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_amp_raw.csv"</span>),</span>
<span id="cb44-151"><a href="#cb44-151" aria-hidden="true" tabindex="-1"></a>            <span class="at">unique_id =</span> subject,</span>
<span id="cb44-152"><a href="#cb44-152" aria-hidden="true" tabindex="-1"></a>            <span class="at">block =</span> blockcode,</span>
<span id="cb44-153"><a href="#cb44-153" aria-hidden="true" tabindex="-1"></a>            <span class="at">trial_type =</span> trialcode,</span>
<span id="cb44-154"><a href="#cb44-154" aria-hidden="true" tabindex="-1"></a>            <span class="at">rt =</span> latency</span>
<span id="cb44-155"><a href="#cb44-155" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb44-156"><a href="#cb44-156" aria-hidden="true" tabindex="-1"></a>          <span class="at">fast_trial =</span> <span class="fu">ifelse</span>(rt <span class="sc">&lt;</span> <span class="dv">100</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb44-157"><a href="#cb44-157" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb44-158"><a href="#cb44-158" aria-hidden="true" tabindex="-1"></a>        unique_id</span>
<span id="cb44-159"><a href="#cb44-159" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb44-160"><a href="#cb44-160" aria-hidden="true" tabindex="-1"></a>      <span class="at">percent_fast_trials =</span> <span class="fu">mean</span>(fast_trial) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb44-161"><a href="#cb44-161" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb44-162"><a href="#cb44-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_fast_trials =</span> <span class="fu">round_half_up</span>(percent_fast_trials, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb44-163"><a href="#cb44-163" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-164"><a href="#cb44-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-165"><a href="#cb44-165" aria-hidden="true" tabindex="-1"></a><span class="co"># print the first few rows</span></span>
<span id="cb44-166"><a href="#cb44-166" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-167"><a href="#cb44-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">|&gt;</span></span>
<span id="cb44-168"><a href="#cb44-168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-169"><a href="#cb44-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-170"><a href="#cb44-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-171"><a href="#cb44-171" aria-hidden="true" tabindex="-1"></a>Notice how the above code has to be written and read from the middle outwards: data is loaded, and what is loaded is used to <span class="in">`rename()`</span> columns, and what the output is used to <span class="in">`mutate()`</span> (create) a new column, whose output is used to <span class="in">`summarize()`</span> across rows for each participant.</span>
<span id="cb44-172"><a href="#cb44-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-173"><a href="#cb44-173" aria-hidden="true" tabindex="-1"></a>This becomes much more linear and human-readable when we use the pipe:</span>
<span id="cb44-174"><a href="#cb44-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-177"><a href="#cb44-177" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-178"><a href="#cb44-178" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> </span>
<span id="cb44-179"><a href="#cb44-179" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read data from csv</span></span>
<span id="cb44-180"><a href="#cb44-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/raw/data_amp_raw.csv"</span>) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb44-181"><a href="#cb44-181" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-182"><a href="#cb44-182" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rename columns</span></span>
<span id="cb44-183"><a href="#cb44-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">unique_id =</span> subject,</span>
<span id="cb44-184"><a href="#cb44-184" aria-hidden="true" tabindex="-1"></a>         <span class="at">block =</span> blockcode,</span>
<span id="cb44-185"><a href="#cb44-185" aria-hidden="true" tabindex="-1"></a>         <span class="at">trial_type =</span> trialcode,</span>
<span id="cb44-186"><a href="#cb44-186" aria-hidden="true" tabindex="-1"></a>         <span class="at">rt =</span> latency) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb44-187"><a href="#cb44-187" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-188"><a href="#cb44-188" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a new variable from existing ones</span></span>
<span id="cb44-189"><a href="#cb44-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fast_trial =</span> <span class="fu">ifelse</span>(rt <span class="sc">&lt;</span> <span class="dv">100</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb44-190"><a href="#cb44-190" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-191"><a href="#cb44-191" aria-hidden="true" tabindex="-1"></a>  <span class="co"># summarize across rows, clustered by participant</span></span>
<span id="cb44-192"><a href="#cb44-192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unique_id) <span class="sc">%&gt;%</span> <span class="co"># -&gt; pass the output onward to the next function</span></span>
<span id="cb44-193"><a href="#cb44-193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">percent_fast_trials =</span> <span class="fu">mean</span>(fast_trial)<span class="sc">*</span><span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-194"><a href="#cb44-194" aria-hidden="true" tabindex="-1"></a>  <span class="co"># round the percents to two decimal places</span></span>
<span id="cb44-195"><a href="#cb44-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_fast_trials =</span> <span class="fu">round_half_up</span>(percent_fast_trials, <span class="at">digits =</span> <span class="dv">2</span>))</span>
<span id="cb44-196"><a href="#cb44-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-197"><a href="#cb44-197" aria-hidden="true" tabindex="-1"></a><span class="co"># print the first few rows</span></span>
<span id="cb44-198"><a href="#cb44-198" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-199"><a href="#cb44-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">|&gt;</span></span>
<span id="cb44-200"><a href="#cb44-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-201"><a href="#cb44-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-202"><a href="#cb44-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-203"><a href="#cb44-203" aria-hidden="true" tabindex="-1"></a><span class="fu">### How to insert a pipe?</span></span>
<span id="cb44-204"><a href="#cb44-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-205"><a href="#cb44-205" aria-hidden="true" tabindex="-1"></a>You can insert a pipe by typing <span class="in">`%&gt;%`</span> or using the following keyboard shortcuts. </span>
<span id="cb44-206"><a href="#cb44-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-207"><a href="#cb44-207" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Windows: shift + Ctrl + M</span>
<span id="cb44-208"><a href="#cb44-208" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Mac: shift + Cmd + M</span>
<span id="cb44-209"><a href="#cb44-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-210"><a href="#cb44-210" aria-hidden="true" tabindex="-1"></a>For other keyboard shortcuts in RStudio, see the chapter on <span class="co">[</span><span class="ot">Fundamentals</span><span class="co">](fundamentals.qmd)</span>.</span>
<span id="cb44-211"><a href="#cb44-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-212"><a href="#cb44-212" aria-hidden="true" tabindex="-1"></a><span class="fu">## Implicit arguments &amp; the pipe</span></span>
<span id="cb44-213"><a href="#cb44-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-214"><a href="#cb44-214" aria-hidden="true" tabindex="-1"></a>As in other cases in R, arguments can be passed to functions 'explicitly' (by naming the argument) or 'implicitly' (without names).</span>
<span id="cb44-215"><a href="#cb44-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-216"><a href="#cb44-216" aria-hidden="true" tabindex="-1"></a>How the pipe works can be slightly clearer if we use explicit arguments.</span>
<span id="cb44-217"><a href="#cb44-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-218"><a href="#cb44-218" aria-hidden="true" tabindex="-1"></a>The pipe passes the output of the preceding function on to the next function as '.':</span>
<span id="cb44-219"><a href="#cb44-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-222"><a href="#cb44-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-223"><a href="#cb44-223" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span> <span class="co"># output passed forward as '.'</span></span>
<span id="cb44-224"><a href="#cb44-224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">x =</span> .) <span class="sc">%&gt;%</span> <span class="co"># output passed forward as '.'</span></span>
<span id="cb44-225"><a href="#cb44-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">x =</span> .) <span class="sc">%&gt;%</span> <span class="co"># -&gt; output passed forward as '.'</span></span>
<span id="cb44-226"><a href="#cb44-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">kable_input =</span> .,</span>
<span id="cb44-227"><a href="#cb44-227" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-228"><a href="#cb44-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-229"><a href="#cb44-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-230"><a href="#cb44-230" aria-hidden="true" tabindex="-1"></a>If not passed explicitly, the input is passed to the next function's *first* argument OR, if the funtion takes the '.data' argument (i.e., most {tidyverse} functions) it is passed to '.data':</span>
<span id="cb44-231"><a href="#cb44-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-234"><a href="#cb44-234" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-235"><a href="#cb44-235" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span> <span class="co"># output passed forward to first argument</span></span>
<span id="cb44-236"><a href="#cb44-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="co"># output passed forward to first argument</span></span>
<span id="cb44-237"><a href="#cb44-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span> <span class="co"># -&gt; output passed forward to first argument</span></span>
<span id="cb44-238"><a href="#cb44-238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-239"><a href="#cb44-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-240"><a href="#cb44-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-241"><a href="#cb44-241" aria-hidden="true" tabindex="-1"></a><span class="fu">### The two pipes: `%&gt;%` vs. `|&gt;`</span></span>
<span id="cb44-242"><a href="#cb44-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-243"><a href="#cb44-243" aria-hidden="true" tabindex="-1"></a><span class="in">`%&gt;%`</span> is the original pipe created for the {magrittr} package and used throughout the tidyverse packages. It is slightly slower but also more flexible because it can pass to the '.data' argument.</span>
<span id="cb44-244"><a href="#cb44-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-245"><a href="#cb44-245" aria-hidden="true" tabindex="-1"></a><span class="in">`|&gt;`</span> is a version of the pipe added more recently to base-R. It is slightly faster but less flexible. This speed only matters if you're doing this with much larger data sets or very frequently (e.g., in Monte Carlo simulations).</span>
<span id="cb44-246"><a href="#cb44-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-247"><a href="#cb44-247" aria-hidden="true" tabindex="-1"></a>The base R pipe (<span class="in">`|&gt;`</span>) is less intelligent behind the scenes. It always supplies the input as the first argument and can't handle passing to '.data'. If you want to pass its output explicitly, you use '<span class="sc">\_</span>' instead of '.'. However, in my experience, this works imperfectly and not all functions will accept it. Example of explicit passing with the base R pipe <span class="in">`|&gt;`</span>:</span>
<span id="cb44-248"><a href="#cb44-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-251"><a href="#cb44-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-252"><a href="#cb44-252" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">|&gt;</span> <span class="co"># output passed forward as '_'</span></span>
<span id="cb44-253"><a href="#cb44-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">x =</span> _) <span class="sc">|&gt;</span> <span class="co"># output passed forward as '_'</span></span>
<span id="cb44-254"><a href="#cb44-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">x =</span> _) <span class="sc">|&gt;</span> <span class="co"># output passed forward as '_'</span></span>
<span id="cb44-255"><a href="#cb44-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">kable_input =</span> _,</span>
<span id="cb44-256"><a href="#cb44-256" aria-hidden="true" tabindex="-1"></a>                <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-257"><a href="#cb44-257" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-258"><a href="#cb44-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-259"><a href="#cb44-259" aria-hidden="true" tabindex="-1"></a>If you're not sure, it's usually easier to use <span class="in">`%&gt;%`</span>.</span>
<span id="cb44-260"><a href="#cb44-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-261"><a href="#cb44-261" aria-hidden="true" tabindex="-1"></a>I try to use <span class="in">`%&gt;%`</span> throughout this book, but because I use <span class="in">`|&gt;`</span> more often in my own code I might slip up.</span>
<span id="cb44-262"><a href="#cb44-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-263"><a href="#cb44-263" aria-hidden="true" tabindex="-1"></a><span class="fu">## Renaming columns</span></span>
<span id="cb44-264"><a href="#cb44-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-265"><a href="#cb44-265" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why rename</span></span>
<span id="cb44-266"><a href="#cb44-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-267"><a href="#cb44-267" aria-hidden="true" tabindex="-1"></a>Column names are easiest to work with when they follow four principles: when they're clear and descriptive, follow a standard convention, are unique, and don't break R syntax.</span>
<span id="cb44-268"><a href="#cb44-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-269"><a href="#cb44-269" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Use clear and descriptive names</span></span>
<span id="cb44-270"><a href="#cb44-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-271"><a href="#cb44-271" aria-hidden="true" tabindex="-1"></a>Variable names should help explain what the variable contains. <span class="in">`X3`</span> tells the user a lot less about the variable than <span class="in">`extroversion_sum_score`</span>.</span>
<span id="cb44-272"><a href="#cb44-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-273"><a href="#cb44-273" aria-hidden="true" tabindex="-1"></a>This sounds obvious, but it's harder than it sounds and it often isn't done.</span>
<span id="cb44-274"><a href="#cb44-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-275"><a href="#cb44-275" aria-hidden="true" tabindex="-1"></a><span class="al">![](../images/meaningful_variable_name_meme.png)</span>{.center width="60%"}</span>
<span id="cb44-276"><a href="#cb44-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-277"><a href="#cb44-277" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Use a naming convention</span></span>
<span id="cb44-278"><a href="#cb44-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-279"><a href="#cb44-279" aria-hidden="true" tabindex="-1"></a>Various naming conventions exist and are used for both objects (e.g., data frames) and functions.</span>
<span id="cb44-280"><a href="#cb44-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-281"><a href="#cb44-281" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>snake_case: standard in {tidyverse} code, e.g., <span class="in">`write_csv()`</span></span>
<span id="cb44-282"><a href="#cb44-282" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>lower.dot.case: often used in older functions in base-R, e.g., <span class="in">`write.csv()`</span></span>
<span id="cb44-283"><a href="#cb44-283" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>camelCase: often used in Python</span>
<span id="cb44-284"><a href="#cb44-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-285"><a href="#cb44-285" aria-hidden="true" tabindex="-1"></a>On the one hand, as long as you're consitent, it doesn't matter which one you use.</span>
<span id="cb44-286"><a href="#cb44-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-287"><a href="#cb44-287" aria-hidden="true" tabindex="-1"></a>On the other hand, snake_case is objectively the best answer and you should use it.</span>
<span id="cb44-288"><a href="#cb44-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-289"><a href="#cb44-289" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Use unique names</span></span>
<span id="cb44-290"><a href="#cb44-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-291"><a href="#cb44-291" aria-hidden="true" tabindex="-1"></a>If more than one column has the same name, you'll have issues trying to work with those columns.</span>
<span id="cb44-292"><a href="#cb44-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-293"><a href="#cb44-293" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Avoid characters that break R syntax</span></span>
<span id="cb44-294"><a href="#cb44-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-295"><a href="#cb44-295" aria-hidden="true" tabindex="-1"></a>The following cause problems:</span>
<span id="cb44-296"><a href="#cb44-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-297"><a href="#cb44-297" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Column names that begin with a number, e.g., <span class="in">`1_to_7_depression`</span>.</span>
<span id="cb44-298"><a href="#cb44-298" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Column names that contain spaces, e.g., <span class="sc">\`</span>depression 1 to 7'.</span>
<span id="cb44-299"><a href="#cb44-299" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Column names that contain characters other than letters and numbers, e.g., <span class="in">`depression_1_to_7*`</span>.</span>
<span id="cb44-300"><a href="#cb44-300" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Column names that are 'reserved names' in R, e.g., <span class="in">`TRUE`</span>.</span>
<span id="cb44-301"><a href="#cb44-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-302"><a href="#cb44-302" aria-hidden="true" tabindex="-1"></a>For example, the 'dat_demographics_raw' data frame contains a columns named <span class="in">`correct`</span> and <span class="in">`0 ms onset RT`</span>.</span>
<span id="cb44-303"><a href="#cb44-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-304"><a href="#cb44-304" aria-hidden="true" tabindex="-1"></a>If we want to print the rows of <span class="in">`correct`</span> using base-R we can do this with <span class="in">`$`</span>:</span>
<span id="cb44-305"><a href="#cb44-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-308"><a href="#cb44-308" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-309"><a href="#cb44-309" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw<span class="sc">$</span>correct</span>
<span id="cb44-310"><a href="#cb44-310" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-311"><a href="#cb44-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-312"><a href="#cb44-312" aria-hidden="true" tabindex="-1"></a>This can also be done using the {dplyr} function <span class="in">`pull()`</span> and the pipe:</span>
<span id="cb44-313"><a href="#cb44-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-316"><a href="#cb44-316" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-317"><a href="#cb44-317" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-318"><a href="#cb44-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(correct)</span>
<span id="cb44-319"><a href="#cb44-319" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-320"><a href="#cb44-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-321"><a href="#cb44-321" aria-hidden="true" tabindex="-1"></a>This can't be done as easily for the column <span class="in">`0 ms onset RT`</span> because the number and spaces break the code and will throw an error:</span>
<span id="cb44-322"><a href="#cb44-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-325"><a href="#cb44-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-326"><a href="#cb44-326" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false # chunk set not to run so that ebook will render, but you can run it in your local .qmd</span></span>
<span id="cb44-327"><a href="#cb44-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-328"><a href="#cb44-328" aria-hidden="true" tabindex="-1"></a><span class="co"># base-R</span></span>
<span id="cb44-329"><a href="#cb44-329" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw<span class="sc">$</span><span class="dv">0</span> ms onset RT</span>
<span id="cb44-330"><a href="#cb44-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-331"><a href="#cb44-331" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr</span></span>
<span id="cb44-332"><a href="#cb44-332" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-333"><a href="#cb44-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(<span class="dv">0</span> ms onset RT)</span>
<span id="cb44-334"><a href="#cb44-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-335"><a href="#cb44-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-336"><a href="#cb44-336" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Error: unexpected numeric constant in "dat_demographics_raw\$0" Error during wrapup: not that many frames on the stack Error: no more error handlers available (recursive errors?); invoking 'abort' restart</span></span>
<span id="cb44-337"><a href="#cb44-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-338"><a href="#cb44-338" aria-hidden="true" tabindex="-1"></a>You can make it work by enclosing the column name in backticks (<span class="sc">\`</span>) or quotes ("):</span>
<span id="cb44-339"><a href="#cb44-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-342"><a href="#cb44-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-343"><a href="#cb44-343" aria-hidden="true" tabindex="-1"></a><span class="co"># base-R</span></span>
<span id="cb44-344"><a href="#cb44-344" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw<span class="sc">$</span><span class="st">"0 ms onset RT"</span></span>
<span id="cb44-345"><a href="#cb44-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-346"><a href="#cb44-346" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr</span></span>
<span id="cb44-347"><a href="#cb44-347" aria-hidden="true" tabindex="-1"></a>dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-348"><a href="#cb44-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(<span class="st">"0 ms onset RT"</span>)</span>
<span id="cb44-349"><a href="#cb44-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-350"><a href="#cb44-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-351"><a href="#cb44-351" aria-hidden="true" tabindex="-1"></a>However this becomes cumbersome and annoying. It's much easier to rename the variable.</span>
<span id="cb44-352"><a href="#cb44-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-353"><a href="#cb44-353" aria-hidden="true" tabindex="-1"></a><span class="fu">### Renaming with `rename()` &amp; the pipe</span></span>
<span id="cb44-354"><a href="#cb44-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-355"><a href="#cb44-355" aria-hidden="true" tabindex="-1"></a>Use <span class="in">`dplyr::rename()`</span> to change the name of one or more columns. It works like this:</span>
<span id="cb44-356"><a href="#cb44-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-357"><a href="#cb44-357" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb44-358"><a href="#cb44-358" aria-hidden="true" tabindex="-1"></a><span class="in">`df %&gt;% rename(new_name = old_name)`</span></span>
<span id="cb44-359"><a href="#cb44-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-360"><a href="#cb44-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-361"><a href="#cb44-361" aria-hidden="true" tabindex="-1"></a>Let's create a data frame called <span class="in">`dat_demographics_renamed`</span> from <span class="in">`dat_demographics_raw`</span>, which renames the <span class="in">`0 ms onset RT`</span> column to timely <span class="in">`rt`</span>:</span>
<span id="cb44-362"><a href="#cb44-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-365"><a href="#cb44-365" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-366"><a href="#cb44-366" aria-hidden="true" tabindex="-1"></a><span class="co"># view old column names </span></span>
<span id="cb44-367"><a href="#cb44-367" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_demographics_raw)</span>
<span id="cb44-368"><a href="#cb44-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-369"><a href="#cb44-369" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-370"><a href="#cb44-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">rt =</span> <span class="st">"0 ms onset RT"</span>)</span>
<span id="cb44-371"><a href="#cb44-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-372"><a href="#cb44-372" aria-hidden="true" tabindex="-1"></a><span class="co"># view new column names </span></span>
<span id="cb44-373"><a href="#cb44-373" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_demographics_renamed)</span>
<span id="cb44-374"><a href="#cb44-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-375"><a href="#cb44-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-376"><a href="#cb44-376" aria-hidden="true" tabindex="-1"></a>If you want to rename multiple columns at once, you can do this in a single call of the <span class="in">`rename()`</span> function:</span>
<span id="cb44-377"><a href="#cb44-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-380"><a href="#cb44-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-381"><a href="#cb44-381" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-382"><a href="#cb44-382" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> <span class="st">"Subject Code"</span>,</span>
<span id="cb44-383"><a href="#cb44-383" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_trial =</span> <span class="st">"block code and trial number"</span>,</span>
<span id="cb44-384"><a href="#cb44-384" aria-hidden="true" tabindex="-1"></a>         <span class="at">question =</span> <span class="st">"Trial Code"</span>, </span>
<span id="cb44-385"><a href="#cb44-385" aria-hidden="true" tabindex="-1"></a>         <span class="at">response =</span> <span class="st">"Key response (use this!)"</span>,</span>
<span id="cb44-386"><a href="#cb44-386" aria-hidden="true" tabindex="-1"></a>         <span class="at">rt =</span> <span class="st">"0 ms onset RT"</span>)</span>
<span id="cb44-387"><a href="#cb44-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-388"><a href="#cb44-388" aria-hidden="true" tabindex="-1"></a><span class="co"># view new column names and the first few rows</span></span>
<span id="cb44-389"><a href="#cb44-389" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_demographics_renamed) <span class="sc">%&gt;%</span></span>
<span id="cb44-390"><a href="#cb44-390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-391"><a href="#cb44-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-392"><a href="#cb44-392" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-393"><a href="#cb44-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-394"><a href="#cb44-394" aria-hidden="true" tabindex="-1"></a><span class="fu">## Automatic renaming with `janitor::clean_names()`</span></span>
<span id="cb44-395"><a href="#cb44-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-396"><a href="#cb44-396" aria-hidden="true" tabindex="-1"></a>Cleaning names is such a common task that there are functions that rename all columns in a dataset at once, such as <span class="in">`janitor::clean_names()`</span>.</span>
<span id="cb44-397"><a href="#cb44-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-398"><a href="#cb44-398" aria-hidden="true" tabindex="-1"></a>However, <span class="in">`clean_names()`</span> can only rename to a standard naming convention and remove problematic characters, it can't choose meaningful variable names.</span>
<span id="cb44-399"><a href="#cb44-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-402"><a href="#cb44-402" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-403"><a href="#cb44-403" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># for clean_names()</span></span>
<span id="cb44-404"><a href="#cb44-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-405"><a href="#cb44-405" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-406"><a href="#cb44-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb44-407"><a href="#cb44-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-408"><a href="#cb44-408" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="sc">%&gt;%</span></span>
<span id="cb44-409"><a href="#cb44-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-410"><a href="#cb44-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-411"><a href="#cb44-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-412"><a href="#cb44-412" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-413"><a href="#cb44-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-414"><a href="#cb44-414" aria-hidden="true" tabindex="-1"></a>It's still very useful as part of a tidy workflow:</span>
<span id="cb44-415"><a href="#cb44-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-418"><a href="#cb44-418" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-419"><a href="#cb44-419" aria-hidden="true" tabindex="-1"></a><span class="co"># code you might write to help you write the final varsion below</span></span>
<span id="cb44-420"><a href="#cb44-420" aria-hidden="true" tabindex="-1"></a>dat_demographics_temp <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-421"><a href="#cb44-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb44-422"><a href="#cb44-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-423"><a href="#cb44-423" aria-hidden="true" tabindex="-1"></a>dat_demographics_temp <span class="sc">%&gt;%</span></span>
<span id="cb44-424"><a href="#cb44-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-425"><a href="#cb44-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dput</span>()</span>
<span id="cb44-426"><a href="#cb44-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-427"><a href="#cb44-427" aria-hidden="true" tabindex="-1"></a><span class="co"># final working version</span></span>
<span id="cb44-428"><a href="#cb44-428" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="ot">&lt;-</span> dat_demographics_raw <span class="sc">%&gt;%</span></span>
<span id="cb44-429"><a href="#cb44-429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-430"><a href="#cb44-430" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> subject_code, </span>
<span id="cb44-431"><a href="#cb44-431" aria-hidden="true" tabindex="-1"></a>         <span class="at">block_trial =</span> block_code_and_trial_number, </span>
<span id="cb44-432"><a href="#cb44-432" aria-hidden="true" tabindex="-1"></a>         <span class="at">question =</span> trial_code, </span>
<span id="cb44-433"><a href="#cb44-433" aria-hidden="true" tabindex="-1"></a>         <span class="at">response =</span> key_response_use_this, </span>
<span id="cb44-434"><a href="#cb44-434" aria-hidden="true" tabindex="-1"></a>         <span class="at">rt =</span> x0_ms_onset_rt)</span>
<span id="cb44-435"><a href="#cb44-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-436"><a href="#cb44-436" aria-hidden="true" tabindex="-1"></a>dat_demographics_renamed <span class="sc">%&gt;%</span></span>
<span id="cb44-437"><a href="#cb44-437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-438"><a href="#cb44-438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-439"><a href="#cb44-439" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_classic</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span>
<span id="cb44-440"><a href="#cb44-440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-441"><a href="#cb44-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-442"><a href="#cb44-442" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercises</span></span>
<span id="cb44-443"><a href="#cb44-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-444"><a href="#cb44-444" aria-hidden="true" tabindex="-1"></a><span class="fu">### What four principles should column names follow?</span></span>
<span id="cb44-445"><a href="#cb44-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-446"><a href="#cb44-446" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to show answer"}</span>
<span id="cb44-447"><a href="#cb44-447" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Use clear and descriptive names</span>
<span id="cb44-448"><a href="#cb44-448" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Use a naming convention such as snake_case</span>
<span id="cb44-449"><a href="#cb44-449" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Use unique names</span>
<span id="cb44-450"><a href="#cb44-450" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Avoid characters that break R syntax, such as spaces, non-alphanumeric characters, or starting column names with a number.</span>
<span id="cb44-451"><a href="#cb44-451" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb44-452"><a href="#cb44-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-453"><a href="#cb44-453" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interactive exercises</span></span>
<span id="cb44-454"><a href="#cb44-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-455"><a href="#cb44-455" aria-hidden="true" tabindex="-1"></a>Complete the interactive <span class="in">`rename()`</span> exercises <span class="co">[</span><span class="ot">here</span><span class="co">](https://errors.shinyapps.io/dplyr-learnr/#section-dplyrrename)</span>. This web app is written in the {shiny} package and allows you to write and run code in your web browser.</span>
<span id="cb44-456"><a href="#cb44-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-457"><a href="#cb44-457" aria-hidden="true" tabindex="-1"></a><span class="fu">### Read .csv file and rename columns</span></span>
<span id="cb44-458"><a href="#cb44-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-459"><a href="#cb44-459" aria-hidden="true" tabindex="-1"></a>Download the data and code for this e-Book (see the <span class="co">[</span><span class="ot">Introduction</span><span class="co">](../index.qmd)</span>).</span>
<span id="cb44-460"><a href="#cb44-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-461"><a href="#cb44-461" aria-hidden="true" tabindex="-1"></a>In your local version of this .qmd file:</span>
<span id="cb44-462"><a href="#cb44-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-463"><a href="#cb44-463" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Create a data frame called <span class="in">`dat_likert_messy`</span> by reading the .csv file from '../data/raw/data_likert_messy.csv'.</span>
<span id="cb44-464"><a href="#cb44-464" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Print its column names.</span>
<span id="cb44-465"><a href="#cb44-465" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Create a new data frame called <span class="in">`dat_likert_renamed`</span> by taking <span class="in">`dat_likert_messy`</span> and using <span class="in">`rename()`</span> and the pipe to rename every column so that it conforms to the four principles above.</span>
<span id="cb44-466"><a href="#cb44-466" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Use <span class="in">`head()`</span> to print the first few rows of <span class="in">`dat_likert_renamed`</span> so that you can verify that the renaming was successful. </span>
<span id="cb44-467"><a href="#cb44-467" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Write suitable comments explaining the code.</span>
<span id="cb44-468"><a href="#cb44-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-471"><a href="#cb44-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-472"><a href="#cb44-472" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb44-473"><a href="#cb44-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-474"><a href="#cb44-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-475"><a href="#cb44-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-476"><a href="#cb44-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-477"><a href="#cb44-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-478"><a href="#cb44-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-479"><a href="#cb44-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-480"><a href="#cb44-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-481"><a href="#cb44-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-482"><a href="#cb44-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-483"><a href="#cb44-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-484"><a href="#cb44-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-485"><a href="#cb44-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-486"><a href="#cb44-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-487"><a href="#cb44-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-488"><a href="#cb44-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-489"><a href="#cb44-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-490"><a href="#cb44-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-491"><a href="#cb44-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-492"><a href="#cb44-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-493"><a href="#cb44-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-494"><a href="#cb44-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-495"><a href="#cb44-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-496"><a href="#cb44-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-497"><a href="#cb44-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-498"><a href="#cb44-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-499"><a href="#cb44-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-500"><a href="#cb44-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-501"><a href="#cb44-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-502"><a href="#cb44-502" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-503"><a href="#cb44-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-504"><a href="#cb44-504" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse="true" title="Click to show answer"}</span>
<span id="cb44-507"><a href="#cb44-507" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb44-508"><a href="#cb44-508" aria-hidden="true" tabindex="-1"></a><span class="co"># read data </span></span>
<span id="cb44-509"><a href="#cb44-509" aria-hidden="true" tabindex="-1"></a>dat_likert_messy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/raw/data_likert_messy.csv"</span>)</span>
<span id="cb44-510"><a href="#cb44-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-511"><a href="#cb44-511" aria-hidden="true" tabindex="-1"></a><span class="co"># print column names</span></span>
<span id="cb44-512"><a href="#cb44-512" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat_likert_messy)</span>
<span id="cb44-513"><a href="#cb44-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-514"><a href="#cb44-514" aria-hidden="true" tabindex="-1"></a><span class="co"># create new df with renamed columns</span></span>
<span id="cb44-515"><a href="#cb44-515" aria-hidden="true" tabindex="-1"></a>dat_likert_renamed <span class="ot">&lt;-</span> dat_likert_messy <span class="sc">%&gt;%</span></span>
<span id="cb44-516"><a href="#cb44-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date =</span> <span class="st">"Date d m y"</span>,</span>
<span id="cb44-517"><a href="#cb44-517" aria-hidden="true" tabindex="-1"></a>         <span class="at">group  =</span> <span class="st">"Group"</span>,</span>
<span id="cb44-518"><a href="#cb44-518" aria-hidden="true" tabindex="-1"></a>         <span class="at">subject_code  =</span> <span class="st">"subject code"</span>,</span>
<span id="cb44-519"><a href="#cb44-519" aria-hidden="true" tabindex="-1"></a>         <span class="at">likert_scale1_item1 =</span> <span class="st">"1 to 7 likert scale item 1"</span>,</span>
<span id="cb44-520"><a href="#cb44-520" aria-hidden="true" tabindex="-1"></a>         <span class="at">likert_scale1_item2 =</span> <span class="st">"1 to 7 likert scale item 2"</span>)</span>
<span id="cb44-521"><a href="#cb44-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-522"><a href="#cb44-522" aria-hidden="true" tabindex="-1"></a><span class="co"># check renaming was successful </span></span>
<span id="cb44-523"><a href="#cb44-523" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat_likert_renamed)</span>
<span id="cb44-524"><a href="#cb44-524" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb44-525"><a href="#cb44-525" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>